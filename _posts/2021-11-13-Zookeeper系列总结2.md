---
layout:     post
title:      Zookeeper系列总结2
subtitle:   Zookeeper Demo
date:       2021-11-09
author:     Yikun Chen
header-img: img/background/header.png
catalog: true
tags:
    - zookeeper

---


# Zookeeper系列总结2

Zookeeper 使用教程
--

zookeeper操作包括节点的增删改查，监听以及权限控制。

## 节点操作

```bash
#创建节点
create  /test data
#获取节点数据
get  /test
#修改节点数据
set /test data1
#获取节点状态
stat /test
#获取当前路径所有节点
ls /
#创建临时节点
create -e /test1 data
#创建序号节点
create -e /test2
create -s /test2/  data
```

## 事件监听

```bash
#监听节点
get  -w  /path
#监听目录
ls -w /path
#递归监听目录
ls -R -w /path
```

## 权限控制

```java
//生成密钥
String sId = DigestAuthenticationProvider.generateDigest("gj:test");
System.out.println(sId);
//输出gj:X/NSthOB0fD/OT6iilJ55WJVado=
```

```bash
#节点加入acl
create /test datatest test:gj:X/NSthOB0fD/OT6iilJ55WJVado=:cdrwa
setAcl /test  test:gj:X/NSthOB0fD/OT6iilJ55WJVado=:cdrwa
#访问节点
addauth test gj:test
get /zk-node
#ip授权
setAcl /test ip:192.168.2.11:cdwra
create /test  data  ip:192.168.2.11:cdwra
```


参考文献
--

